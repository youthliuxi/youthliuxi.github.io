---
title: windows+ubuntu双系统
date: 2018-04-05 23:24:45
tags: windows,ubuntu,双系统
categories:
  - 学习笔记
  - 程序猿
---

## 写在前面
我的情况是：使用的笔记本装了个windows10系统，但日前打算较长时间使用linux系统，而对虚拟机里运行linux有一定的不稳定感，所以，才会准备在电脑里，辟出60G的空间，安装ubuntu，让实体机彻底进入我的生活，同时保证不打乱之前的设置。
<!--more-->
## 准备工作
* 一台windows系统的电脑，其中一个分区能够压缩出40~60G空间
* 一颗大于8G的U盘
* ubuntu系统镜像，从[ubuntu官网](https://www.ubuntu.com/index_kylin)下载，推荐选择desktop版，自己的笔记本要啥server版，又hold不住
* 一个U盘启动项制作工具，大白菜、老毛桃、u启动、powerISO......个人推荐powerISO，操作方便，不需要才写个PE啥的
* 软件easyBCD

## 开始动手
1. 右键单击“此电脑”，以此选择“管理”->“磁盘管理”，从目标磁盘中压缩出60G的未分配空间，不需要做任何处理
2. 使用powerISO打开系统镜像，并将其烧录进U盘里
3. 进入windows10电源选项，关闭快速启动
4. 关机，开机，使用bios或者快速选择U盘启动
5. 依次选择“中文简体”，“安装ubuntu”，“暂时不连接网络”，“安装第三方软件”
6. 下面进入最关键的分区情况，以下列举我的分区方案，仅供参考（60G方案）
	
| 挂载点 | 分区类别 | 用于 | 大小 | 
| - | :-: | -: | -: |
| 无 | 逻辑分区 | 交换空间 |  内存的两倍 | 
| / | 主分区 | Ext4 |  20G | 
| /boot | 逻辑分区 | Ext4 | 500Mb | 
| /home | 逻辑分区 | Ext4 | 剩下的所有 | 
7. 为了保证ubuntu绝对不影响windows，我们采用windows的引导，所以，在这里，把“安装启动引导器的设备”选择在/boot所在的分区里
8. 点击“现在安装”，安装过程就基本结束了，剩下的就是等待了
9. 安装完成后，去windows系统内，装easyBCD，把ubuntu的/boot所在分区添加进引导项

## 注意事项
1. 以上的某个步骤操作不明白可以百度找教程
2. 以上处理方式保留了windows的引导，所以，如果进入linux系统，会出现，先在windows系统引导中选择一次ubuntu，再从linux的引导中再选择一次ubuntu，目前没有找到比较好的办法关闭GNU grub2引导，我找到的办法是，打开“/etc/default/grub”文件，把time的值从10改为1，然后保存退出，运行【sudo update-grub2】，运行结束，重启即可
3. 双系统影响windows时间的问题：
	1. “运行”->“regedit”
	2. 以此选择“HKEY_LOCAL_MACHINE”->“SYSTEM”->“CurrentControlSet”->“Control”->“TimeZoneInformation”
	3. 右侧空白处右键单击，选择“新建”->“QWORD（64位）值”，我是64位的系统
	4. 文件名“RealTimeIsUniversal”，数值数据“1”，基数“十六进制”，点击“确定”
	5. 重启，搞定。

## 牢骚
失败了一个下午，结果发现，安装过程中断报错的原因，竟然是我使用了一个非常老旧的U盘，其内部有存储模块损坏，所以，才会在拷贝数据的时候出现问题。换了一个新买的，就解决问题了，神坑啊，害得我忙活了一下午，差点就放弃了。