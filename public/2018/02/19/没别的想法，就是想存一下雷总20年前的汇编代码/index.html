<!DOCTYPE html>
<html>
<head>
  <!-- hexo-inject:begin --><!-- hexo-inject:end --><meta charset="utf-8">
  
  <title>没别的想法，就是想存一下雷总20年前的汇编代码 | 你若盛开，蝴蝶爱来不来</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="以前从来没黑过我雷总，但是，也没有说多关注他，只是比较看好小米手机的发展。今天，我正式宣布，成为雷粉，武大计算机系、两年修满四年学分、汇编语言满分通过、写过大大小小各种软件、参与编著《深入DOS编程》一书、投资了多个有潜力的企业、带着小米在安卓市场杀出一条血路，这tm就是神啊~（PS：下面这个汇编代码，2185行）">
<meta name="keywords" content="雷军,汇编语言">
<meta property="og:type" content="article">
<meta property="og:title" content="没别的想法，就是想存一下雷总20年前的汇编代码">
<meta property="og:url" content="http://youthliuxi.github.io/2018/02/19/没别的想法，就是想存一下雷总20年前的汇编代码/index.html">
<meta property="og:site_name" content="你若盛开，蝴蝶爱来不来">
<meta property="og:description" content="以前从来没黑过我雷总，但是，也没有说多关注他，只是比较看好小米手机的发展。今天，我正式宣布，成为雷粉，武大计算机系、两年修满四年学分、汇编语言满分通过、写过大大小小各种软件、参与编著《深入DOS编程》一书、投资了多个有潜力的企业、带着小米在安卓市场杀出一条血路，这tm就是神啊~（PS：下面这个汇编代码，2185行）">
<meta property="og:locale" content="default">
<meta property="og:updated_time" content="2018-02-19T15:16:45.454Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="没别的想法，就是想存一下雷总20年前的汇编代码">
<meta name="twitter:description" content="以前从来没黑过我雷总，但是，也没有说多关注他，只是比较看好小米手机的发展。今天，我正式宣布，成为雷粉，武大计算机系、两年修满四年学分、汇编语言满分通过、写过大大小小各种软件、参与编著《深入DOS编程》一书、投资了多个有潜力的企业、带着小米在安卓市场杀出一条血路，这tm就是神啊~（PS：下面这个汇编代码，2185行）">
  
    <link rel="alternative" href="/atom.xml" title="你若盛开，蝴蝶爱来不来" type="application/atom+xml">
  
  
    <link rel="icon" href="/img/favicon.png">
  
  
      <link rel="stylesheet" href="//cdn.bootcss.com/animate.css/3.5.0/animate.min.css">
  
  <link rel="stylesheet" href="/css/style.css">
  <link rel="stylesheet" href="/font-awesome/css/font-awesome.min.css">
  <link rel="apple-touch-icon" href="/apple-touch-icon.png">
  
  
      <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  
  <!-- 加载特效 -->
    <script src="/js/pace.js"></script>
    <link href="/css/pace/pace-theme-flash.css" rel="stylesheet" />
  <script>
      var yiliaConfig = {
          rootUrl: '/',
          fancybox: true,
          animate: true,
          isHome: false,
          isPost: true,
          isArchive: false,
          isTag: false,
          isCategory: false,
          open_in_new: false
      }
  </script><!-- hexo-inject:begin --><!-- hexo-inject:end -->
</head>
<body>
  <!-- hexo-inject:begin --><!-- hexo-inject:end --><div id="container">
    <div class="left-col">
    <div class="overlay"></div>
<div class="intrude-less">
    <header id="header" class="inner">
        <a href="/" class="profilepic">
            
            <img lazy-src="/img/head.jpg" class="js-avatar">
            
        </a>

        <hgroup>
          <h1 class="header-author"><a href="/" title="Hi Mate">edward</a></h1>
        </hgroup>

        
            <form>
                <input type="text" class="st-default-search-input search" id="search" placeholder=" Search...">
            </form>
        
            <div id="switch-btn" class="switch-btn">
                <div class="icon">
                    <div class="icon-ctn">
                        <div class="icon-wrap icon-house" data-idx="0">
                            <div class="birdhouse"></div>
                            <div class="birdhouse_holes"></div>
                        </div>
                        <div class="icon-wrap icon-ribbon hide" data-idx="1">
                            <div class="ribbon"></div>
                        </div>
                        
                        <div class="icon-wrap icon-link hide" data-idx="2">
                            <div class="loopback_l"></div>
                            <div class="loopback_r"></div>
                        </div>
                        
                        
                        <div class="icon-wrap icon-me hide" data-idx="3">
                            <div class="user"></div>
                            <div class="shoulder"></div>
                        </div>
                        
                    </div>
                    
                </div>
                <div class="tips-box hide">
                    <div class="tips-arrow"></div>
                    <ul class="tips-inner">
                        <li>菜单</li>
                        <li>标签</li>
                        
                        <li>友情链接</li>
                        
                        
                        <li>关于我</li>
                        
                    </ul>
                </div>
            </div>
        

        <div id="switch-area" class="switch-area">
            <div class="switch-wrap">
                <section class="switch-part switch-part1">
                    <nav class="header-menu">
                        <ul>
                        
                            <li><a href="/#">博客首页</a></li>
                        
                            <li><a href="/friendship">友情链接</a></li>
                        
                            <li><a href="/about">关于我</a></li>
                        
                            <li><a href="/atom.xml">rss</a></li>
                        
                        </ul>
                    </nav>
                    <nav class="header-nav">
                        <ul class="social">
                            
                                <a class="fl mail" target="_blank" href="http://mail.qq.com/cgi-bin/qm_share?t=qm_mailme&email=375853285@qq.com" title="mail">mail</a>
                            
                                <a class="fl github" target="_blank" href="https://github.com/youthliuxi" title="github">github</a>
                            
                                <a class="fl zhihu" target="_blank" href="https://www.zhihu.com/people/lx_edward" title="zhihu">zhihu</a>
                            
                                <a class="fl weibo" target="_blank" href="http://weibo.com/u/1682787817" title="weibo">weibo</a>
                            
                                <a class="fl google" target="_blank" href="#" title="google">google</a>
                            
                                <a class="fl twitter" target="_blank" href="https://twitter.com/EinsteinLx" title="twitter">twitter</a>
                            
                                <a class="fl linkedin" target="_blank" href="#" title="linkedin">linkedin</a>
                            
                        </ul>
                    </nav>
                </section>
                
                
                <section class="switch-part switch-part2">
                    <div class="widget tagcloud" id="js-tagcloud">
                        <a href="/tags/ReStructuredText/" style="font-size: 10px;">ReStructuredText</a> <a href="/tags/Retro-Terminal/" style="font-size: 10px;">Retro Terminal</a> <a href="/tags/VMware/" style="font-size: 10px;">VMware</a> <a href="/tags/ag/" style="font-size: 10px;">ag</a> <a href="/tags/android/" style="font-size: 12.5px;">android</a> <a href="/tags/apache/" style="font-size: 17.5px;">apache</a> <a href="/tags/apache配置/" style="font-size: 10px;">apache配置</a> <a href="/tags/apicloud/" style="font-size: 10px;">apicloud</a> <a href="/tags/chmod/" style="font-size: 10px;">chmod</a> <a href="/tags/git/" style="font-size: 10px;">git</a> <a href="/tags/github/" style="font-size: 12.5px;">github</a> <a href="/tags/googles-fonts/" style="font-size: 10px;">googles fonts</a> <a href="/tags/hexo/" style="font-size: 12.5px;">hexo</a> <a href="/tags/jiathis/" style="font-size: 10px;">jiathis</a> <a href="/tags/lamp/" style="font-size: 12.5px;">lamp</a> <a href="/tags/latex/" style="font-size: 10px;">latex</a> <a href="/tags/linux/" style="font-size: 15px;">linux</a> <a href="/tags/mac/" style="font-size: 10px;">mac</a> <a href="/tags/macOS/" style="font-size: 10px;">macOS</a> <a href="/tags/markdown/" style="font-size: 12.5px;">markdown</a> <a href="/tags/master/" style="font-size: 10px;">master</a> <a href="/tags/mysql/" style="font-size: 10px;">mysql</a> <a href="/tags/node-js/" style="font-size: 10px;">node.js</a> <a href="/tags/nodejs/" style="font-size: 10px;">nodejs</a> <a href="/tags/nw-js/" style="font-size: 10px;">nw.js</a> <a href="/tags/php/" style="font-size: 10px;">php</a> <a href="/tags/phpmyadmin/" style="font-size: 15px;">phpmyadmin</a> <a href="/tags/pscp/" style="font-size: 10px;">pscp</a> <a href="/tags/putty/" style="font-size: 10px;">putty</a> <a href="/tags/python/" style="font-size: 12.5px;">python</a> <a href="/tags/raspberrypi/" style="font-size: 12.5px;">raspberrypi</a> <a href="/tags/res/" style="font-size: 10px;">res</a> <a href="/tags/termux/" style="font-size: 10px;">termux</a> <a href="/tags/tmux/" style="font-size: 12.5px;">tmux</a> <a href="/tags/typecho/" style="font-size: 10px;">typecho</a> <a href="/tags/ubuntu/" style="font-size: 20px;">ubuntu</a> <a href="/tags/vim/" style="font-size: 10px;">vim</a> <a href="/tags/windows/" style="font-size: 10px;">windows</a> <a href="/tags/wordpress/" style="font-size: 17.5px;">wordpress</a> <a href="/tags/zip/" style="font-size: 10px;">zip</a> <a href="/tags/三姑六婆计算器/" style="font-size: 10px;">三姑六婆计算器</a> <a href="/tags/为知笔记/" style="font-size: 10px;">为知笔记</a> <a href="/tags/乱码/" style="font-size: 10px;">乱码</a> <a href="/tags/你好多莉/" style="font-size: 10px;">你好多莉</a> <a href="/tags/分支/" style="font-size: 10px;">分支</a> <a href="/tags/前端，css/" style="font-size: 10px;">前端，css</a> <a href="/tags/双系统/" style="font-size: 10px;">双系统</a> <a href="/tags/后来的我们/" style="font-size: 10px;">后来的我们</a> <a href="/tags/四中/" style="font-size: 10px;">四中</a> <a href="/tags/四班/" style="font-size: 10px;">四班</a> <a href="/tags/回忆/" style="font-size: 10px;">回忆</a> <a href="/tags/在线文档/" style="font-size: 10px;">在线文档</a> <a href="/tags/学习笔记/" style="font-size: 10px;">学习笔记</a> <a href="/tags/安装/" style="font-size: 10px;">安装</a> <a href="/tags/宝塔面板/" style="font-size: 10px;">宝塔面板</a> <a href="/tags/富文本编辑器/" style="font-size: 10px;">富文本编辑器</a> <a href="/tags/年终总结/" style="font-size: 15px;">年终总结</a> <a href="/tags/影评/" style="font-size: 10px;">影评</a> <a href="/tags/插件/" style="font-size: 10px;">插件</a> <a href="/tags/数学公式/" style="font-size: 10px;">数学公式</a> <a href="/tags/树莓派/" style="font-size: 12.5px;">树莓派</a> <a href="/tags/汇编语言/" style="font-size: 10px;">汇编语言</a> <a href="/tags/汉罗塔/" style="font-size: 10px;">汉罗塔</a> <a href="/tags/漫威/" style="font-size: 10px;">漫威</a> <a href="/tags/电影，火星救援/" style="font-size: 10px;">电影，火星救援</a> <a href="/tags/登录保护/" style="font-size: 10px;">登录保护</a> <a href="/tags/笔记/" style="font-size: 12.5px;">笔记</a> <a href="/tags/网站地图/" style="font-size: 10px;">网站地图</a> <a href="/tags/自定义头像/" style="font-size: 10px;">自定义头像</a> <a href="/tags/访问/" style="font-size: 10px;">访问</a> <a href="/tags/递归/" style="font-size: 10px;">递归</a> <a href="/tags/配置/" style="font-size: 10px;">配置</a> <a href="/tags/雷军/" style="font-size: 10px;">雷军</a> <a href="/tags/黑苹果/" style="font-size: 10px;">黑苹果</a>
                    </div>
                </section>
                
                
                
                <section class="switch-part switch-part3">
                    <div id="js-friends">
                    
                      <a target="_blank" class="main-nav-link switch-friends-link" href="http://youthol.cn/">青春在线</a>
                    
                      <a target="_blank" class="main-nav-link switch-friends-link" href="http://youthliuxi.cn/">另一处青春</a>
                    
                    </div>
                </section>
                

                
                
                <section class="switch-part switch-part4">
                
                    <div id="js-aboutme">姓名：攻城狮；性别：男；年龄：相信耳听爱情、相信天长地久；座右铭：你若盛开，蝴蝶迟早会来。</div>
                </section>
                
            </div>
        </div>
    </header>                
</div>
    </div>
    <div class="mid-col">
      <nav id="mobile-nav">
      <div class="overlay">
          <div class="slider-trigger"></div>
          <h1 class="header-author js-mobile-header hide"><a href="/" title="Me">edward</a></h1>
      </div>
    <div class="intrude-less">
        <header id="header" class="inner">
            <a href="/" class="profilepic">
                
                    <img lazy-src="/img/head.jpg" class="js-avatar">
                
            </a>
            <hgroup>
              <h1 class="header-author"><a href="/" title="Me">edward</a></h1>
            </hgroup>
            
            <nav class="header-menu">
                <ul>
                
                    <li><a href="/#">博客首页</a></li>
                
                    <li><a href="/friendship">友情链接</a></li>
                
                    <li><a href="/about">关于我</a></li>
                
                    <li><a href="/atom.xml">rss</a></li>
                
                <div class="clearfix"></div>
                </ul>
            </nav>
            <nav class="header-nav">
                <div class="social">
                    
                        <a class="mail" target="_blank" href="http://mail.qq.com/cgi-bin/qm_share?t=qm_mailme&email=375853285@qq.com" title="mail">mail</a>
                    
                        <a class="github" target="_blank" href="https://github.com/youthliuxi" title="github">github</a>
                    
                        <a class="zhihu" target="_blank" href="https://www.zhihu.com/people/lx_edward" title="zhihu">zhihu</a>
                    
                        <a class="weibo" target="_blank" href="http://weibo.com/u/1682787817" title="weibo">weibo</a>
                    
                        <a class="google" target="_blank" href="#" title="google">google</a>
                    
                        <a class="twitter" target="_blank" href="https://twitter.com/EinsteinLx" title="twitter">twitter</a>
                    
                        <a class="linkedin" target="_blank" href="#" title="linkedin">linkedin</a>
                    
                </div>
            </nav>
        </header>                
    </div>
</nav>
      <div class="body-wrap"><article id="post-没别的想法，就是想存一下雷总20年前的汇编代码" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2018/02/19/没别的想法，就是想存一下雷总20年前的汇编代码/" class="article-date">
      <time datetime="2018-02-19T15:06:30.000Z" itemprop="datePublished">2018-02-19</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      没别的想法，就是想存一下雷总20年前的汇编代码
    </h1>
  

      </header>
      
      <div class="article-info article-info-post">
        
    <div class="article-category tagcloud">
    <a class="article-category-link" href="/categories/随笔/">随笔</a><a class="article-category-link" href="/categories/随笔/程序猿/">程序猿</a>
    </div>


        
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/汇编语言/">汇编语言</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/雷军/">雷军</a></li></ul>
    </div>

        <div class="clearfix"></div>
      </div>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <p>以前从来没黑过我雷总，但是，也没有说多关注他，只是比较看好小米手机的发展。今天，我正式宣布，成为雷粉，武大计算机系、两年修满四年学分、汇编语言满分通过、写过大大小小各种软件、参与编著《深入DOS编程》一书、投资了多个有潜力的企业、带着小米在安卓市场杀出一条血路，这tm就是神啊~<br>（PS：下面这个汇编代码，2185行）<a id="more"></a></p>
<pre>
;
; RI.ASM  Revision 2.12         [ July 12, 1994 ]
Revision        equ     'V2.12 '
;
; **************************************************************************
; *                                                                        *
; *  RAMinit  Release 2.0                                                  *
; *  Copyright (c) 1989-1994 by Yellow Rose Software Co.                   *
; *  Written by Mr. Leijun                                                 *
; *                                                                        *
; *  Function:                                                             *
; *    Press HotKey to remove all TSR program after this program           *
; *                                                                        *
; **************************************************************************

; ..........................................................................
; Removed Softwares by RI:
;   SPDOS v6.0F, WPS v3.0F
;   Game Busters III, IV
;   NETX ( Novell 3.11 )
;   PC-CACHE
;   Norton Cache
;   Microsoft SmartDrv
;   SideKick 1.56A
;   MOUSE Driver
;   Crazy (Monochrome simulate CGA program)
;   RAMBIOS v2.0
;   386MAX Version 6.01
; ..........................................................................
; No cancel softwares:
;   Windows 3.1 MSD
;
; No removed TSR softwares:
;   MS-DOS fastopen
;   Buffers, Files ... (QEMM 6.0)
;   QCache (386MAX 6.01)
; ..........................................................................
;
COMMENT *

 V2.04  Use mouse driver software reset function to initiation mouse
        2/17/1993 by  Mr. Lei and Mr. Feng
 V2.05  RI cannot work in Windows DOS prompt
        3/9/1993  by Mr. Lei
 V2.06  1. When XMS cannot allocate 1K memory, RI halts.
        2. RI repeat deallocates EMS memory.
 V2.07  HotKey Setup Error
        4/25/1993 by Mr. Lei
 V2.08  KB Buffer
 V2.10  1. Release high memory blocks (EMM386 QEMM386 S-ICE 386MAX)
        2. RI copies flag
 V2.12  1. Exists a critical error in Init 8259 procedure
        2. Save [40:F0--FF] user data area

*

                dosseg
                .model tiny
                .code
                locals  @@
                org     100h

Start:          jmp     Main
                org     103h

  True          equ     1
  False         equ     0
  MaxHandles    equ     100h

        INT3    macro
                out     0ffh,al
                endm
  ;
  ;             HotKey Status                             Test Var
  ;            ---------------                         ---------------
  ;
  ;  7 6 5 4 3 2 1 0                                    417  418  496
  ;  . . x . x . . .    Left Alt is pressed              8    2
  ;  x . . . x . . .    Right Alt is pressed             8         8
  ;  . . . x . x . .    Left Ctrl is pressed             4    1
  ;  . x . . . x . .    Right Ctrl is pressed            4         4
  ;  . . . . . . x .    Left Shift is pressed            2
  ;  . . . . . . . x    Right Shift is pressed           1
  ;
  LeftAlt       equ     00101000b
  RightAlt      equ     10001000b
  LeftCtrl      equ     00010100b
  RightCtrl     equ     01000100b
  LeftShift     equ     00000010b
  RightShift    equ     00000001b
  HotKey        db      LeftCtrl or RightCtrl

  DataBegin     dw      0
  NextDataSeg   dw      0ffffh
  oldInt2F_addr dw      0, 0
  XMS_control   dw      0, 0
  Handle_begin  dw      0
  cvtOfs        dw      0       ; DOS 3.0 equ 0 and above DOS 4.0 is 1
                org     104h
                db      0dh
                db      Revision
                db      ??date
                db      26
                org     114h
  tsrLength     dw      0
  MachineID     db      0FCh    ; IBM PC/AT

  AuxHotKey     db      0       ; 2Dh     ; 'X' Scan Code
  AuxHotKeyName db      'X$      '
  Power         db      True
  Flag          db      '!'
  Kbd102        db      0
  NoFlag        db      0
  StopFlag      db      1
  DosEnv        dw      0
  WorkSeg       dw      0
  PrevDataSeg   dw      0
  Copies        db      '1'
  old_8259      db      0       ; 21h port
                db      0       ; a1h port

  Status        dw      0
  XMSbit        equ     00000001b
  EMSbit        equ     00000010b
  SKbit         equ     10000000b

GoINT1C:        db      0eah
  oldInt1C_addr dw      0, 0
newINT1C:
                test    cs:Status, SKbit
                jnz     GoINT1C
                cmp     cs:StopFlag, 0
                jz      @@0
;
; Mr. Lei  2/8/1993
; Problem: if WPS quit and reenter, old RI cann't control keyboard.
;
                push    ds
                push    ax
                xor     ax, ax
                mov     ds, ax
                mov     ax, ds:[9*4]
                cmp     ax, offset NewInt9
                pop     ax
                pop     ds
                jnz     GoINT1C
                mov     cs:StopFlag, 0

        @@0:    push    ax
                push    ds
                push    es
                xor     ax, ax
                mov     ds, ax
                mov     es, ds:[9*4+2]
                cmp     word ptr es:[101h], 'IE'        ; 'LEI'
                jz      @@1
                cli
                mov     cs:StopFlag, 1
                mov     ax, ds:[9*4]
                mov     cs:oldINT9_addr2, ax
                mov     ax, ds:[9*4+2]
                mov     cs:oldINT9_addr2[2], ax
                mov     ds:[9*4], offset newINT9_2
                mov     ds:[9*4+2], cs
                sti
        @@1:    pop     es
                pop     ds
                pop     ax
                jmp     GoINT1C

; ----------------------------------------------------------------------
;  INT2F Func
;
;     AX = C0D7h   Return RI segment in AX
;     AX = C0D8h   Removes all TSR programs after RI
;     AX = C0D9h   Removes all TSR programs include RI
;     AX = C0DAh   Removes all RI copies
; ----------------------------------------------------------------------

newINT2F:
                cmp     ax, 0c0d7h      ; LEI Hanzi GB Code
                jnz     @@1
                push    cs
                pop     ax
                iret
        @@1:    cmp     ax, 0c0d7h+1
                jnz     @@2
                jmp     KeepSelf
        @@2:    cmp     ax, 0c0d7h+2
                jnz     @@3
                jmp     NoKeepSelf
        @@3:    cmp     ax, 0c0d7h+3
                jnz     @@9
                mov     cs:NextDataSeg, -1
                mov     cs:Copies, '1'
                jmp     NoKeepSelf
        @@9:    jmp     dword ptr cs:oldInt2F_addr


CallInt9:
                ret


newINT9_2:
                mov     cs:NoFlag, 1
                pushf
                db      9ah             ; call far ptr oldint9_addr
  oldInt9_Addr2 dw      0, 0
                jmp     newINT9_proc

newINT9:
                pushf
                db      9ah             ; call far ptr oldint9_addr
  oldInt9_Addr  dw      0, 0
                cmp     cs:NoFlag, 0
                jz      newINT9_proc
                mov     cs:NoFlag, 0
                iret
newINT9_proc:
                cmp     cs:Flag, '!'    ; busy ?
                jnz     @@0
                iret
        @@0:
                mov     cs:Flag, '!'    ; set busy flag
                push    ax              ; cmp hot key
                push    bx
                push    es
                mov     ax,40h
                mov     es,ax

                cmp     cs:AuxHotKey, 0
                jz      @@_1
                mov     bx, es:[1ah]
                cmp     bx, es:[1ch]
                jz      @@10
                push    bx
                mov     bl, es:[bx+1]
                cmp     bl, cs:AuxHotKey
                pop     bx
                jnz     @@10
        @@_1:
                mov     ah,es:[17h]     ; test CTRL SHIFT ALT
                mov     al,cs:HotKey
                push    ax
                and     ax,0f0fh
                cmp     al,ah
                pop     ax
                jnz     @@10
                cmp     cs:Kbd102, True
                jnz     @@1
                shr     al, 1
                shr     al, 1
                shr     al, 1
                shr     al, 1
                push    ax
                mov     ah, es:[18h]
                and     ax, 303h
                cmp     al, ah
                pop     ax
                jnz     @@10
                mov     ah, es:[96h]
                shr     ax, 1
                shr     ax, 1
                and     ax, 303h
                cmp     al, ah
                jnz     @@10

                cmp     cs:AuxHotKey, 0
                jz      @@_3
                inc     bx
                inc     bx
                cmp     bx, 3eh
                jb      @@_2
                mov     bx, 1eh
        @@_2:
                mov     es:[1ah], bx
        @@_3:
                call    IsWinDos
                or      ax, ax
                jz      @@1
                call    Beep
        @@10:
                sti
                pop     es
                pop     bx
                pop     ax
                mov     cs:Flag, ' '    ; no busy
                iret
        @@1:                                            ; OK
                pop     es
                pop     bx
                pop     ax

KeepSelf:
                call    RemoveTSR
                push    es
                mov     es,cs:WorkSeg
                mov     dx,es:tsrLength
                mov     di,dx
                mov     al,0h           ; Aug 24, 1993
                mov     cx,100h
                rep     stosb
                pop     es
                int     27h

NoKeepSelf:
                mov     ax,0e07h
                int     10h
                mov     cs:clsStr, 47h  ; Color (White in Red)
                call    RemoveTSR
                dec     cs:Copies
                call    RestoreSelfIntVec
                push    es
                cmp     cs:PrevDataSeg, 0
                jz      @@1
                mov     es, cs:PrevDataSeg
                mov     es:NextDataSeg, -1
        @@1:    pop     es
                mov     ax, 4c00h
                int     21h

; ---------------------------------------------------------------------------

IsWinDOS:
                mov     ax, 1600h
                int     2fh
                cmp     al, 01h
                jz      @@9
                cmp     al, 0ffh
                jz      @@9                     ; Windows/386 Version 2.X
                cmp     al, 00h
                jz      @@1
                cmp     al, 80h
                jnz     @@9                     ; Windows 3 in enhanced mode
                                                ; Version number in AL/AH
        @@1:
                mov     ax, 4680h
                int     2fh
                cmp     al, 80h
                jnz     @@9
                xor     ax, ax
                jmp     @@10
        @@9:    mov     ax, 1
        @@10:   ret

; -----------------------------------------------------------------------
RestoreSelfIntVec:
                cmp     Copies, '0'
                jz      @@0
                ret
        @@0:
                cli
                push    cs
                pop     ds
                xor     ax, ax
                mov     es, ax
                mov     si, offset oldInt9_Addr
                mov     di, 9*4
                movsw
                movsw
                mov     si, offset oldInt2F_Addr
                mov     di, 2Fh*4
                movsw
                movsw
                mov     si, offset oldInt1C_Addr
                mov     di, 1Ch*4
                movsw
                movsw
                sti
                ret

; ------------- KERNEL PROGRAM ----------------------------------------------
RemoveTSR:
                pop     ax
                cli                     ; Set stack
                mov     sp, cs
                mov     ss, sp
                mov     sp, 100h
                sti
                push    ax

                cmp     cs:Power, True
                jnz     @@1
                call    Init8259
        @@1:
                push    cs
                pop     ds
        @@_0:
                mov     ax,ds:NextDataSeg
                cmp     ax, -1
                jz      @@_1
                mov     cs:PrevDataSeg, ds
                mov     ds, ax
                jmp     @@_0
        @@_1:   mov     si,ds:DataBegin
                mov     cs:WorkSeg, ds
                lodsw
                cmp     ax, 'XX'
                jz      @@_2
                call    Beep
                ret
        @@_2:
                call    RestoreEnvStr
                call    RestoreMCB         ; restore current mcb
                call    CloseFiles
                call    RestorePort
                call    RestoreLEDs
                call    RestoreVecList     ; Restore vectors list
                call    RestoreFloppyParam
                cmp     cs:Power, True
                jnz     @@2
                call    RestoreCVTchain    ; Restore cvt chain
                call    RestoreMemoryManager
        @@2:
                call    RestoreBiosData
                call    Enable8259
                mov     ah, 1
                int     16h

                call    RestoreClockSpeed
                call    CloseSpeaker
                call    ResetDisk
                call    UpdateTime

                call    ClosePRN
                mov     bx,cs:WorkSeg
                mov     ah,50h
                int     21h                ; Set PSP segment
                mov     ax,3
                int     10h                ; Set display mode

                call    InitPRN
                call    InitMouse
                mov     al, cs:Copies
                cmp     al, '1'
                ja      @@_sh1
                mov     cs:ShowCopies, '*'
                jmp     @@_sh2
        @@_sh1: mov     cs:ShowCopies, al
        @@_sh2:
                mov     si, offset clsStr
                call    ColorPrintStr
                mov     cs:Flag, ' '       ; no busy
                cmp     Copies, '1'
                jnz     @@_end
                mov     cs:StopFlag, 0
        @@_end:
                call    ClearKB_buffer
                ret

Beep:
                mov     ax,0e07h
                int     10h
                ret

; #########################################################################

ClearKB_Buffer:
                push    es
                push    bx
                mov     bx, 0040h
                mov     es, bx
                cli
                mov     bx, es:[1ah]
                mov     es:[1ch], bx
                sti
                pop     bx
                pop     es
                ret


Init8259:
        ;       cmp     cs:Copies, '1'
        ;       jz      @@1
        ;       ret
        @@1:
                cmp     cs:MachineID, 0fch
                ja      @@pc_xt
        @@AT:
                mov     bx,870h         ;
                mov     al,0            ;
                out     0F1h,al         ;
                jcxz    $+2
                jcxz    $+2
                mov     al,11h          ; ICW1
                out     0A0h,al
                jcxz    $+2
                jcxz    $+2
                out     20h,al
                jcxz    $+2
                jcxz    $+2
                mov     al,bl           ; ICW2
                out     0A1h,al
                jcxz    $+2
                jcxz    $+2
                mov     al,bh
                out     21h,al
                jcxz    $+2
                jcxz    $+2
                mov     al,2            ; ICW3
                out     0A1h,al
                jcxz    $+2
                jcxz    $+2
                mov     al,4
                out     21h,al
                jcxz    $+2
                jcxz    $+2
                mov     al,1            ; ICW4
                out     0A1h,al
                jcxz    $+2
                jcxz    $+2
                out     21h,al
                jcxz    $+2
                jcxz    $+2
                mov     al,0FFh         ; OCW1
                out     0A1h,al
                jcxz    $+2
                jcxz    $+2
                out     21h,al
                ret
        @@PC_XT:
                mov     al,13h          ; ICW1
                out     20h,al
                jcxz    $+2
                jcxz    $+2
                mov     al,8            ; ICW2
                out     21h,al
                jcxz    $+2
                jcxz    $+2
                mov     al,9            ; ICW4
                out     21h,al
                jcxz    $+2
                jcxz    $+2
                mov     al,0FFh         ; OCW1
                out     21h,al
                ret

Enable8259:
                mov     ax, word ptr cs:old_8259
                out     021h,al
                jcxz    $+2
                jcxz    $+2
                mov     al,ah
                out     0a1h,al         ; DEC PC Bus Mouse
                ret                     ; July 1994 by Mr. Lei

; -------------------------------------------------------------------------

RestoreBiosData:
                lodsw
                cmp     ax, '--'
                jz      @@1
                call    Beep
                ret
        @@1:    push    es
                push    di
                mov     di, 40h
                mov     es, di

                mov     di, 10h
                movsw
                mov     di, 0a8h         ; [40h:a8h]
                movsw
                movsw
                mov     di, 49h
                mov     cx, 1dh
                rep     movsb

                mov     di, 0f0h         ; User data
                mov     cx, 8
                rep     movsw

                pop     di
                pop     es
                ret

; -------------------------------------------------------------------------

RestoreMCB:
                push    ds
                push    es
                lodsw                           ; 'MZ'
        @@0:    lodsw
                cmp     ax, 'MM'
                jz      @@1
                mov     es,ax
                xor     di,di
                movsb
                movsw
                movsw
                inc     ax
                mov     bx, ds
                cmp     ax, bx
                jz      @@10
                mov     byte ptr es:[8], 0      ; Aug 24, 1993
        @@10:   cmp     byte ptr es:[0], 'Z'
                jnz     @@0
                mov     byte ptr es:[10h], 0
                jmp     @@0
        @@1:
                pop     es
                pop     ds
                ret

; -------------------------------------------------------------------------
CloseFiles:
                mov     ax, 5           ; Begin handle
                push    ds
                push    si
                mov     cx, 15          ; Max handle
                sub     cx, ax
                inc     cx
                mov     bx, ax
        @@1:    push    bx
                push    cx
                mov     ah, 3eh
                int     21h
                pop     cx
                pop     bx
                inc     bx
                loop    @@1
                pop     si
                pop     ds
                ret

; -------------------------------------------------------------------------
RestorePort:
                mov     di, 40h            ; restore port
                mov     es, di
                xor     di, di
                mov     cx, 8
                rep     movsw
                ret

; -------------------------------------------------------------------------
RestoreLEDs:
                lodsb
                and     al, 11110000b      ; LED status
                mov     ah, es:[17h]
                and     ah, 00001111b
                or      ah, al
                and     ah, 0f0h           ; Clear CTRL ALT SHIFT
                mov     es:[17h], ah
                ret

; -------------------------------------------------------------------------
RestoreEnvStr:
                lodsw
                push    si
                push    di
                push    ds
                push    es
                mov     es, cs:DosEnv
                mov     ds, ax
                xor     si, si
                mov     di, si
        @@0:    lodsb
                or      al, al
                jnz     @@1
                cmp     byte ptr ds:[si], 0
                jz      @@2
        @@1:    stosb
                jmp     @@0
        @@2:    stosb
                stosb
                pop     es
                pop     ds
                pop     di
                pop     si
                ret

; -----------------------------------------------------------------------
RestoreVecList:
                xor     ax,ax
                mov     di,ax
                mov     es,ax
                mov     cx,100h
        @@0:    lodsw
                xchg    dx, ax
                lodsw
                cmp     dx, 'EL'
                jnz     @@1
                cmp     al, 'I'
                jnz     @@1
                sub     cl, ah
                push    cx
                mov     cl, ah
                mov     ax, es:[di-4]
                mov     dx, es:[di-2]
         @@a:   stosw
                xchg    ax, dx
                stosw
                xchg    ax, dx
                loop    @@a
                pop     cx
                or      cx, cx
                jz      @@9
                jmp     @@0
        @@1:
                xchg    ax, dx
                stosw
                xchg    ax, dx
                stosw
                loop    @@0
        @@9:
                ret

;----------------------------------------------------------------------------
RestoreFloppyParam:                                     ; Mr. Lei   2/10/1992
                push    es
                push    ax
                xor     ax, ax
                mov     es, ax
                mov     byte ptr es:[525h], 2
                pop     ax
                pop     es
                ret

;---------------------------------------------------------------------------
RestoreCVTchain:
                lodsw
                cmp     ax, 'VC'
                jz      @@_0
                call    Beep
                ret
        @@_0:
                push    ax
                push    cx
                push    es

        ; -----------------------------------------------------------------
                lodsw                   ; DPB
                mov     di, ax
                lodsw
                mov     es, ax
        @@1:    lodsb
                inc     di
                stosb
                add     di, cs:cvtOfs
                add     di, 10h
                movsw
                movsw
                les     di, es:[di+2]
                cmp     di, -1
                jnz     @@1

        ; -----------------------------------------------------------------
                lodsw                   ; DCB
                mov     di, ax
                lodsw
                mov     es, ax
                xor     ax, ax
                dec     ax
                stosw

        ; -----------------------------------------------------------------
                lodsw                   ; Device Driver Chain
                mov     di, ax
                lodsw
                mov     es, ax
                xor     cx, cx
        @@9:    push    di
                mov     cl, 5
                rep     movsw
                pop     di
                les     di, es:[di]
                mov     ax, di
                inc     ax
                jnz     @@9
                pop     es
                pop     cx
                pop     ax
                ret

; ----------------------------------------------------------------------------
RestoreMemoryManager:
                test    cs:Status, XMSbit
                jz      @@1
                call    LoadXMSstatus
        @@1:
                test    cs:Status, EMSbit
                jz      @@2
                call    LoadEMSstatus
        @@2:
                ret


LoadEMSstatus:
                lodsw
                cmp     ax, 'ME'
                jz      @@_0
                call    Beep
                ret
        @@_0:
                lodsw
                mov     cx, ax
                xor     dx, dx
        @@_1:   push    ds
                push    si
                push    dx
                push    cx

        @@0:    cmp     dx, ds:[si]
                jz      @@1
                add     si, 4
                loop    @@0

                push    cx
                mov     cx, 5
        @@__0:  mov     ah, 45h         ; Deallocate Handle and Memory
                int     67h
                or      ah, ah
                jz      @@__1
                loop    @@__0
        @@__1:  pop     cx

        @@1:
                pop     cx
                pop     dx
                pop     si
                pop     ds
                inc     dx
                cmp     dx, 100h
                jb      @@_1
                shl     cx, 1
                shl     cx, 1
                add     si, cx
                ret


LoadXMSstatus:
                lodsw
                cmp     ax, 'MX'
                jz      @@_0
                call    Beep
                ret
        @@_0:
                lodsw
                mov     cx, ax
                jcxz    @@5
        @@1:
                lodsw
                mov     dx, ax
        @@2:    push    dx
                mov     ah, 0ah                 ; free
                call    dword ptr cs:xms_control
                or      ax, ax
                pop     dx
                jnz     @@4
                cmp     bl, 0abh
                jnz     @@4
                push    dx
                mov     ah, 0dh                 ; unlock
                call    dword ptr cs:xms_control
                or      ax, ax
                pop     dx
                jmp     @@2
        @@4:    loop    @@1
        @@5:    ret
                endp

; -----------------------------------------------------------------------
CloseSpeaker:
                in      al, 61h
                and     al, 0fch
                out     61h, al
                ret

; -----------------------------------------------------------------------
RestoreClockSpeed:
                mov     al, 00110110b
                out     43h, al
                xor     ax, ax
                out     40h, al
                out     40h, al
                ret

; -----------------------------------------------------------------------
ResetDisk:
                xor     ax, ax
                xor     dx, dx
                int     13h             ; Restore A
                inc     dx
                int     13h             ; Restore B
                mov     dl, 80h
                int     13h             ; Restore C
                ret



; --------------------------------------------------------------------------
ClosePRN:
                mov     ah, 51h         ; Get PSP seg
                int     21h
                mov     es, bx
                mov     ax, es:[16h]    ; Prev PSP seg
                cmp     ax, bx
                jnz     @@9
                mov     ax, 3e00h       ; COMMAND
                mov     bx, 4
                int     21h
        @@9:
                ret

InitPRN:
                mov     ax, 3e00h
                mov     bx, 4           ; PRN
                int     21h
                mov     ax, 3d01h
                mov     dx, offset PRNname
                push    cs
                pop     ds
                int     21h
                ret
PRNname         db      'PRN',0

InitMouse:                              ; 2/16/1993 by Mr. Lei
                push    es
                xor     ax, ax
                mov     es, ax
                cmp     word ptr es:[33h*4+2], 0
                jz      @@0
                cmp     word ptr es:[33h*4], 0
                jz      @@0
                mov     ax, 21h
                int     33h             ; Hook Mouse Interrupt
        @@0:    pop     es
                ret

; ------------- CMOS CLOCK set to System -----------------------------------
UpdateTime:
                call    GetRealTime
                mov     ah, 2dh
                int     21h
                ret

GetRealTime:
                mov     ah,2
                int     1Ah
                mov     al,ch
                call    bcdxchg
                mov     ch,al
                mov     al,cl
                call    bcdxchg
                mov     cl,al
                mov     al,dh
                call    bcdxchg
                mov     dh,al
                mov     dl,0
                ret

BCDxchg:
                push    ax
                push    cx
                mov     cl,4
                shr     al,cl
                pop     cx
                mov     bl,0Ah
                mul     bl
                pop     bx
                and     bl,0Fh
                add     al,bl
                ret

; -----------------------------------------------------------------------
; Display string
ColorPrintStr:
                lodsb
                mov     bh, al          ; color
                xor     cx, cx
                mov     dx, 014fh
                mov     ax, 0600h
                int     10h

                mov     ah, 02          ; GotoXY (0, 0)
                xor     dx, dx
                mov     bh, 0
                int     10h
PrintStr:
                push    cs
                pop     ds
                xor     bx, bx
        @@1:    lodsb
                cmp     al, '$'
                jz      @@2
                or      al, al
                jz      @@2
                mov     ah, 0eh
                int     10h
                jmp     short @@1
        @@2:    mov     al, cs:clsStrcolor
                mov     cs:clsStr, al
                ret

; -----------------------------------------------------------------------
  Self          dw      0
  clsStrcolor   db      17h
  clsStr        db      17h             ; Color (White in Blue)
    db ' RAMinit  Version 2.12  (c) 1989-1994 by KingSoft Ltd.  Mr. Leijun'
    db 0dh,0ah
    db ' ['
  ShowCopies    db      '*'
    db '] Activate...',0ah,0dh,'$'

endTSR  equ     $
mcbList equ     offset endTSR + 2 + 2
vecList equ     mcbList + 7*10 + 2 + 10h + 1 + 400h
devLink equ     vecList + 4 + 5 * 26 + 4 + 10 * 30h + 4
xmsList equ     devLink + 2 + MaxHandles * 2
emsList equ     xmsList + 4 + 1024
crtMode equ     emsList + 2 + 1Dh + 4 + 10h
tsrLen  equ     crtMode + 1
;
; DOS Environment Reserved by RI
; --------------------------------------------------
;   Flag                        'XX'       2 bytes
;   Environment Segment                    1 word
;   Free MCBs                         < =7*10 bytes
;     MCB segment               1 word
;     MCB                       5 bytes
;   End flag                    'MM'       1 word
;   COM LPT ports                        10h bytes
;   LEDs status                            1 bytes
;   Packed vectors list               <=400h 0="" 1="" 2="" 3="" 4="" 5="" 8="" 9="" 10="" 12="" 25="" 1993="" bytes="" ;="" flag="" 'cv'="" cvt="" first="" dpb="" pointer="" dpbs="" data="" <="5*26" dcb="" to="" nul="" all="" device="" driver="" datas="" 'xm'="" xms="" free="" handle="" counter="" ems="" list="" 'em'="" word="" number="" of="" pages="" '--'="" equipment="" crt="" 40:49h-66h="" 1dh="" 40:a8h="" dword="" bios="" user="" area="" 40:f0--ff="" 10h="" ***************************************************************************="" main:="" jmp="" main0="" print="" macro="" str="" lea="" dx,="" call="" displaystr="" endm="" instmsg="" db="" 'raminit="" version="" 2.12="" '="" 'copyright="" (c)="" 1989-1994="" by="" kingsoft="" ltd.="" ',0dh,0ah,'$'="" msg0="" 'already="" installed="" !',0dh,0ah,0ah="" 'for="" help,="" type="" "ri="" ?".="" msg_0="" 0ah,'residents="" a="" new="" raminit="" copy="" [y="" n]="" ?="" $'="" msg_2="" 'ok,="" ri="" no.'="" msg_ri="" '2'="" residents="" successful="" !',="" 0dh,0ah,'$'="" msg1="" 'activate="" with:="" keymsg="" 'right_shift$'="" 'left_shift$="" kmsg1="" 'left_ctrl$="" 'left_alt$="" 'right_ctrl$="" 'right_alt$="" kmsg2="" 'ctrl$="" 'alt$="" plusmsg="" +="" crlf="" helpmsg="" 'programmed="" mr.="" leijun="" dec="" 1992',="" 0dh,0ah,0ah="" 'usage:="" [options]',0dh,0ah,0ah="" h,="" display="" this="" screen',0dh,0ah="" cls="" removes="" tsr="" programs="" after="" current="" ri',0dh,0ah="" ret="" include="" environment',0dh,0ah="" copies="" and="" other="" programs',0dh,0ah="" sxyy..="" define="" hotkey="" x="AuxHotkey" yy..="shift" status',0dh,0ah="" (default="" is="" "x")="" ',0dh,0ah="" equ="" "1"="" means="" need="" auxhotkey',0dh,0ah="" status="" [cascas]',0dh,0ah="" c:="" left="" ctrl="" a:="" alt="" s:="" shift',0dh,0ah="" right="" shift',0dh,0ah,0ah="" 'example:="" s1c"="" right_ctrl+x',0dh,0ah="" s0cc"="" left_ctrl+right_ctrl',0dh,0ah="" cls"="" equals="" simply="" press="" hotkey',0dh,0ah="" ret"="" tsrs="" 0ah="" 'contact="" me="" for="" problems:="" (01)2561155="" 1997',0dh,0ah="" '$'="" errmsg="" 'error:="" invalid="" options="" !',0dh,0ah,0ah,'$'="" winerr="" 7,="" 'sorry,="" i="" cannot="" work="" in="" windows="" dos="" environment.',0dh,0ah,'$'="" setmsg="" 'defines="" tsrok="" false="" main0:="" cld="" iswindos="" or="" ax,="" ax="" jz="" @@1="" mov="" 4c00h="" int="" 21h="" @@1:="" hotkeyvalid="" cs:status,="" ems_test="" cmpdosver="" cmpsidekick="" getmachineid="" modifyhotkeyprompt="" 0c0d7h="" 2fh="" es,="" cmp="" ptr="" es:[101h],="" 'ie'="" 'lei'="" jnz="" @@0="" cs:self,="" @@0:="" cmdline="" printhotkeyprompt="" cs:tsrok,="" true="" @@2="" tsrreplyok="" @@2:="" @@_2="" printcopies="" @@_2:="" cs:[100h],="" 'el'="" byte="" cs:[102h],="" 'i'="" push="" cs="" pop="" es="" ds="" std="" si,="" offset="" eof="" cx,="" -="" here="" di,="" tsrlen="" add="" cx="" inc="" rep="" movsb="" bx,="" bx="" here:="" ax,cs="" es,ax="" di,offset="" endtsr="" cs:databegin,="" di="" cs:nextdataseg,="" -1="" 'xx'="" stosw="" al,="" 0a1h="" ah,="" al="" cs:old_8259,="" xor="" out="" 21h,al="" cli="" saveothers="" setselfint="" backupveclist="" cs:power,="" @@20="" backupcvtchain="" backupmemorymanager="" @@20:="" backupbiosdata="" sti="" cs:flag,="" no="" busy="" cs:stopflag,="" cs:tsrlength,="" setdosenvseg="" @@29="" cs:tsrlength="" cs:databegin="" sub="" si="" 120h="" @@29:="" 21h,="" ah="" 0a1h,="" dx="" 27h="" ----------------------------------------------------------------------------="" setdosenvseg:="" @@10:="" es:[16h]="" get="" father="" process="" psp="" segment="" @@11="" @@10="" @@11:="" es:[2ch]="" env="" cs:dosenv,="" saveothers:="" cs:[2ch]="" seg="" backupmcb="" mcb="" 40h="" com="" lpt="" port="" ds,="" 0h="" movsw="" 17h="" led="" lodsb="" stosb="" openleds="" --------------------------------------------------------------------------="" backupmcb:="" 'zm'="" 52h="" chain="" head="" es:[bx-2]="" ds:[0],="" 'z'="" end="" 'm'="" memory="" control="" block="" @@30="" ds:[3],="" ds:[1],="" savefreemcb="" ds:[3]="" 0a000h="" jnb="" 9fffh="" ms-dos="" umb="" @@30:="" 0c000h="" 386max="" ja="" @@90="" 0c020h="" @@90:="" error="" 'mm'="" set="" savefreemcb:="" si,si="" 09fffh="" @@3="" ds,ax="" @@4="" @@4:="" openleds:="" open leds="" 070h="" ds:[17h],="" 16h="" delay="" @@21:="" loop @@21="" setselfint:="" ax,3509h="" cs:oldint9_addr,bx="" cs:oldint9_addr[2],es="" dx,offset="" newint9="" ax,2509h="" ax,352fh="" cs:oldint2f_addr,bx="" cs:oldint2f_addr[2],es="" newint2f="" ax,252fh="" ax,351ch="" cs:oldint1c_addr,bx="" cs:oldint1c_addr[2],es="" newint1c="" ax,251ch="" cs:self="" es:copies="" @@_0:="" es:nextdataseg,="" @@_1="" es:nextdataseg="" @@_0="" @@_1:="" -----------------------------------------------------------------------="" savecounter:="" es:[di],="" es:[di+2],="" es:[di+3],="" bl="" displaystr:="" cmdline:="" 80h="" 's'="" sethotkey="" @@_3:="" 'a'="" jb="" ds:[si-1],20h="" downcase="" @@3:="" @@_3="" @@5="" ds:[si-3],="" 'lc'="" @err="" 0c0d7h+1="" @@5:="" 'h'="" help="" @help="" '?'="" 't'="" @@6="" 'er'="" @@7:="" 0c0d7h+2="" @@6:="" 'w'="" @@8="" 'en'="" @@8:="" 'l'="" @@9="" 'la'="" 0c0d7h+3="" @@9:="" @err:="" @help:="" ;---------------------------------------------------------------------------="" tsrreplyok:="" @@_10:="" @@_10="" es:[3]="" es:[0],="" 'oc'="" 'y'="" msg_1="" 4c01h="" printcopies:="" added="" -by-="" lei="" aug="" 24,="" total="" search="" file="" name="" es:[bx],="" 20h="" 0ffh="" 00h="" ':'="" "ri:2"="" es:[bx+1],="" 8+7="" es:[bx+2],="" cs:msg_ri,="" backup="" interrupt="" vector="" backupveclist:="" vectors="" ds,si="" cx,00ffh="" lodsw="" xchg="" es:[di-2]="" es:[di-4]="" savecounter="" ;-----------------------------------------------------------------------------="" backupcvtchain:="" 'vc'="" es:bx="" --="" table="" as="" described="" below="" --------------------------------------------------------------------="" chains="" lds="" es:[bx]="" cs:cvtofs="" ds:[si+1]="" ds:[si+bx+12h]="" ds:[si+bx+14h]="" ds:[si+bx+18h]="" mul="" cl="" blocks="" les="" es:[bx+4]="" ---------------------------------------------------------------------="" 22h="" cl,="" ds:[si]="" backupbiosdata:="" 0a8h="" 49h="" 0f0h="" ---------------------------------------------------------------------------="" backupmemorymanager:="" savexmsstatus="" saveemsstatus="" ;---------------------------------------------------------------------="" saveemsstatus:="" test="" emsbit="" 'me'="" 4dh="" 67h="" es:[di-2],="" shl="" -------------------------------------------------------------------="" savexmsstatus:="" xms_test="" xmsbit="" 'mx'="" xms_alloc="" alloc="" failure="" maxhandles="" *="" xms_lock="" bl,="" 0a2h="" xms_unlock="" cs:handle_begin,="" xms_bstat="" xms_free="" cs:handle_begin="" @@7="" ------------------------------------------------------------------="" xms_test:="" 4300h="" 4310h="" cs:xms_control,="" cs:xms_control[2],="" xms_stat:="" cs:xms_control="" hma_exist,="" dl="" hma_exist="" xms_alloc:="" xms_lock:="" 0ch="" xms_unlock:="" 0dh="" xms_bstat:="" 0eh="" xms_free:="" ems_test:="" emmname="" 3d00h="" jc="" 3eh="" 'emmxxxx0',0="" -----------------------------------------------------------------------------="" sethotkey:="" 'c'="" leftctrl="" rightctrl="" leftalt="" rightalt="" leftshift="" rightshift="" cs:hotkey,="" cs:auxhotkey,="" 2dh="" 'x'="" scan="" key="" '1'="" es:hotkey,="" cs:auxhotkey="" es:auxhotkey,="" getrunfilename="" 3d02h="" 100h="" 4200h="" auxhotkey="" getrunfilename:="" return:="" ds:dx="" run="" asciiz="" string="" 1000h="" repnz="" scasb="" loopnz="" getmachineid:="" kbd102,true="" ax,40h="" es:[96h],="" 00010000b="" kbd102,false="" ax,ax="" al,es:[0eh]="" cs:machineid,="" modifyhotkeyprompt:="" cs:kbd102,="" 12*4="" 0fch="" jna="" cs:clsstrcolor,="" 70h="" mono="" cs:clsstr,="" printhotkeyprompt:="" cs:hotkey="" shr="" 33ch="" @@40:="" @@_42="" jnc="" @@41="" colordisplaystr="" @@42="" @@41:="" @@40="" @@42:="" @@_42:="" @@43="" @@_43="" @@_43:="" auxhotkeyname="" @@43:="" colordisplaystr:="" 0fh="" bh,="" bh="" 09h="" short="" cmpsidekick:="" es:[20h]="" es:[bx-4],="" 4b53h="" es:[bx-2],="" 4942h="" es:[94h]="" skbit="" cmpdosver:="" 30h="" cs:cvtofs,="" dosvererr="" 4cffh="" too="" lower="" !',0dh,0ah,'$'="" hotkeyvalid:="" hotkeyerr="" 4cfeh="" please="" setup="" again.="" eof:="" ends="" start="" -------------="" the="" !="" ---------------------------------------------------="" ="" pre=""></=400h></pre>
      
    </div>
    
  </div>
  
    
    <div class="copyright">
        <p><span>本文标题:</span><a href="/2018/02/19/没别的想法，就是想存一下雷总20年前的汇编代码/">没别的想法，就是想存一下雷总20年前的汇编代码</a></p>
        <p><span>文章作者:</span><a href="/" title="访问 edward 的个人博客">edward</a></p>
        <p><span>发布时间:</span>2018年02月19日 - 23时06分</p>
        <p><span>最后更新:</span>2018年02月19日 - 23时16分</p>
        <p>
            <span>原始链接:</span><a class="post-url" href="/2018/02/19/没别的想法，就是想存一下雷总20年前的汇编代码/" title="没别的想法，就是想存一下雷总20年前的汇编代码">http://youthliuxi.github.io/2018/02/19/没别的想法，就是想存一下雷总20年前的汇编代码/</a>
            <span class="copy-path" data-clipboard-text="原文: http://youthliuxi.github.io/2018/02/19/没别的想法，就是想存一下雷总20年前的汇编代码/　　作者: edward" title="点击复制文章链接"><i class="fa fa-clipboard"></i></span>
            <script src="/js/clipboard.min.js"></script>
            <script> var clipboard = new Clipboard('.copy-path'); </script>
        </p>
        <p>
            <span>许可协议:</span><i class="fa fa-creative-commons"></i> <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/3.0/cn/" title="中国大陆 (CC BY-NC-SA 3.0 CN)" target = "_blank">"署名-非商用-相同方式共享 3.0"</a> 转载请保留原文链接及作者。
        </p>
    </div>



<nav id="article-nav">
  
    <a href="/2018/04/01/python学习笔记01/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption"><</strong>
      <div class="article-nav-title">
        
          python学习笔记01
        
      </div>
    </a>
  
  
    <a href="/2018/02/16/记在丁酉年末、戊戌年初/" id="article-nav-older" class="article-nav-link-wrap">
      <div class="article-nav-title">记在丁酉年末、戊戌年初</div>
      <strong class="article-nav-caption">></strong>
    </a>
  
</nav>

  
</article>

    <div id="toc" class="toc-article">
    <strong class="toc-title">文章目录</strong>
    
</div>
<input type="button" id="tocButton" value="隐藏目录"  title="点击按钮隐藏或者显示文章目录">

<script src="https://7.url.cn/edu/jslib/comb/require-2.1.6,jquery-1.9.1.min.js"></script>
<script>
    var valueHide = "隐藏目录";
    var valueShow = "显示目录";

    if ($(".left-col").is(":hidden")) {
        $("#tocButton").attr("value", valueShow);
    }
    $("#tocButton").click(function() {
        if ($("#toc").is(":hidden")) {
            $("#tocButton").attr("value", valueHide);
            $("#toc").slideDown(320);
        }
        else {
            $("#tocButton").attr("value", valueShow);
            $("#toc").slideUp(350);
        }
    })
    if ($(".toc").length < 1) {
        $("#toc, #tocButton").hide();
    }
</script>





<div class="bdsharebuttonbox">
	<a href="#" class="fx fa-weibo bds_tsina" data-cmd="tsina" title="分享到新浪微博"></a>
	<a href="#" class="fx fa-weixin bds_weixin" data-cmd="weixin" title="分享到微信"></a>
	<a href="#" class="fx fa-qq bds_sqq" data-cmd="sqq" title="分享到QQ好友"></a>
	<a href="#" class="fx fa-facebook-official bds_fbook" data-cmd="fbook" title="分享到Facebook"></a>
	<a href="#" class="fx fa-twitter bds_twi" data-cmd="twi" title="分享到Twitter"></a>
	<a href="#" class="fx fa-linkedin bds_linkedin" data-cmd="linkedin" title="分享到linkedin"></a>
	<a href="#" class="fx fa-files-o bds_copy" data-cmd="copy" title="分享到复制网址"></a>
</div>
<script>window._bd_share_config={"common":{"bdSnsKey":{},"bdText":"","bdMini":"2","bdMiniList":false,"bdPic":"","bdStyle":"2","bdSize":"24"},"share":{}};with(document)0[(getElementsByTagName('head')[0]||body).appendChild(createElement('script')).src='/static/api/js/share.js?v=89860593.js?cdnversion='+~(-new Date()/36e5)];</script>




    
      <div class="duoshuo" id="comments">
    <!-- 多说评论框 start -->
    <div class="ds-thread" data-thread-key="2018/02/19/没别的想法，就是想存一下雷总20年前的汇编代码/" data-title="没别的想法，就是想存一下雷总20年前的汇编代码" data-url="http://youthliuxi.github.io/2018/02/19/没别的想法，就是想存一下雷总20年前的汇编代码/"></div>
    <!-- 多说评论框 end -->
    <!-- 多说公共JS代码 start (一个网页只需插入一次) -->
    <script type="text/javascript">
    var duoshuoQuery = {short_name:""};
    (function() {
        var ds = document.createElement('script');
        ds.type = 'text/javascript';ds.async = true;
        ds.src = '/js/embed.js';
        ds.charset = 'UTF-8';
        (document.getElementsByTagName('head')[0] 
         || document.getElementsByTagName('body')[0]).appendChild(ds);
    })();
    </script>
    <!-- 多说公共JS代码 end -->
</div>

    



    <div class="scroll" id="post-nav-button">
        
            <a href="/2018/04/01/python学习笔记01/" title="上一篇: python学习笔记01">
                <i class="fa fa-angle-left"></i>
            </a>
        
        <a title="文章列表"><i class="fa fa-bars"></i><i class="fa fa-times"></i></a>
        
            <a href="/2018/02/16/记在丁酉年末、戊戌年初/" title="下一篇: 记在丁酉年末、戊戌年初">
                <i class="fa fa-angle-right"></i>
            </a>
        
    </div>
    <ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2018/05/16/android上的终端——termux/">android上的终端——termux</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/05/12/《复仇者联盟3：无限战争》/">《复仇者联盟3：无限战争》</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/05/10/acme-sh配置ssl证书/">acme.sh配置ssl证书</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/05/02/《后来的我们》——强行尬感情牌/">《后来的我们》——强行尬感情牌</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/05/02/linux权限相关/">linux权限相关</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/04/28/Markdown添加Latex数学公式/">Markdown添加Latex数学公式</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/04/17/树莓派上的lamp/">树莓派上的lamp</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/04/10/tmux使用小记/">tmux使用小记</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/04/09/hexo备份相关/">hexo备份相关</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/04/05/windows-ubuntu双系统/">windows+ubuntu双系统</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/04/04/树莓派入门/">树莓派入门</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/04/04/VMware装macOS/">VMware装macOS</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/04/01/python学习笔记02/">python学习笔记02</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/04/01/python学习笔记01/">python学习笔记01</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/02/19/没别的想法，就是想存一下雷总20年前的汇编代码/">没别的想法，就是想存一下雷总20年前的汇编代码</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/02/16/记在丁酉年末、戊戌年初/">记在丁酉年末、戊戌年初</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/01/31/递归问题/">递归问题</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/01/26/linux随手记之——宝塔和终端/">linux随手记之——宝塔和终端</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/01/26/Android里运行ubuntu的方法（以小米2S为例）/">Android里运行ubuntu的方法（以小米2S为例）</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/12/31/恢复wordpress和hexo博客小记/">恢复wordpress和hexo博客小记</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/07/04/一波毕业照引起的回忆杀/">一波毕业照引起的回忆杀~</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/06/17/提笔，不知从何说起/">提笔，不知从何说起</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/05/09/word2016很抱歉此功能看似已中断——修复/">word2016很抱歉此功能看似已中断——修复</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/05/05/《银河护卫队2》/">《银河护卫队2》</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/04/30/生日礼物小记/">生日礼物小记</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/03/19/我的泡面情怀/">我的泡面情怀</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/02/25/一个人，寻找着一个人/">一个人，寻找着一个人</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/02/15/考研一战，失利/">考研一战，失利</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/02/09/一份被遗弃的魅力/">一份被遗弃的魅力</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/02/08/一个段子引发的深思/">一个段子引发的深思</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/01/29/wordpress转typecho/">wordpress转typecho</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/01/27/记在丙申年除夕夜/">记在丙申年除夕夜</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/01/23/成熟与否，并不是你自己说了算的/">成熟与否，并不是你自己说了算的</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/01/19/new-blog-hexo/">new blog hexo</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/08/17/这一次，让我们重回大一，可好/">这一次，让我们重回大一，可好</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/06/06/照顾好我们的孩子（一）/">照顾好我们的孩子（一）</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/06/05/遇见你，我的人生有了新的故事/">遇见你，我的人生有了新的故事</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/06/03/利用Office2013离线发布WordPress博客/">利用Office2013离线发布WordPress博客</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/06/02/ubuntu16.04-LTS版安装lamp/">ubuntu16.04  LTS版安装lamp</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/06/01/lnmp安装，以centos为例/">lnmp安装，以centos为例</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/06/01/XAMPP和VMWare的端口443冲突的解决/">XAMPP和VMWare的端口443冲突的解决</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/03/26/《蝙蝠侠大战超人：正义黎明》/">《蝙蝠侠大战超人：正义黎明》</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/03/18/我想和你谈一场势均力敌的恋爱/">我想和你谈一场势均力敌的恋爱</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/03/13/《疯狂动物城》/">《疯狂动物城》</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/02/27/You're-halfway-there/">You're halfway there</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/02/04/月老与孟婆/">月老与孟婆</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/01/26/寒假在校的那些事儿/">寒假在校的那些事儿</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/01/17/由搜索页面改版想到/">由搜索页面改版想到</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/01/15/自动控制原理课程设计-全纪录/">自动控制原理课程设计-全纪录</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/01/12/markdown学习笔记（用markdown写）/">markdown学习笔记（用markdown写）</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/01/08/漫漫人生路，迷茫进行中/">漫漫人生路，迷茫进行中</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/01/04/wordpress修改记录（quench主题小优化）/">wordpress修改记录（quench主题小优化）</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/01/03/win7下怎样设置putty免用户名密码登陆/">win7下怎样设置putty免用户名密码登陆</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/01/03/wordpress小问题集锦（解决wordpress更新权限问题）/">wordpress小问题集锦（解决wordpress更新权限问题）</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/01/03/linux操作，wordpress搭建时出现的小问题汇总/">linux操作，wordpress搭建时出现的小问题汇总</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/01/02/搭建从云端服务器搭建wordpress的种种~~~（乱炖）/">搭建从云端服务器搭建wordpress的种种~~~（乱炖）</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/01/01/ubuntu里安装vim/">ubuntu里安装vim</a></li><li class="post-list-item"><a class="post-list-link" href="/2015/12/31/lamp环境的搭建/">lamp环境的搭建</a></li><li class="post-list-item"><a class="post-list-link" href="/2015/12/31/未来，不过如此——提笔，回忆一年/">未来，不过如此——提笔，回忆一年</a></li><li class="post-list-item"><a class="post-list-link" href="/2015/12/30/wordpress插件集锦/">wordpress插件集锦</a></li><li class="post-list-item"><a class="post-list-link" href="/2015/12/30/【技巧】把为知笔记发布到WordPress博客/">【技巧】把为知笔记发布到WordPress博客</a></li><li class="post-list-item"><a class="post-list-link" href="/2015/12/30/使用sphinx记笔记（即ReStructuredText在线文档的搭建方法）/">使用sphinx记笔记（即ReStructuredText在线文档的搭建方法）</a></li><li class="post-list-item"><a class="post-list-link" href="/2015/12/29/css权值，你知道多少？/">css权值，你知道多少？</a></li><li class="post-list-item"><a class="post-list-link" href="/2015/12/28/Git学习笔记小结/">Git学习笔记小结</a></li><li class="post-list-item"><a class="post-list-link" href="/2015/12/20/nodejs学习笔记（1）/">nodejs学习笔记（1）</a></li><li class="post-list-item"><a class="post-list-link" href="/2015/12/18/find-some-funny/">find some funny</a></li><li class="post-list-item"><a class="post-list-link" href="/2015/12/16/考试，一个节点，新的开始/">考试，一个节点，新的开始</a></li><li class="post-list-item"><a class="post-list-link" href="/2015/12/10/记在凌晨/">记在凌晨</a></li><li class="post-list-item"><a class="post-list-link" href="/2015/12/07/running-man/">Running Man</a></li><li class="post-list-item"><a class="post-list-link" href="/2015/12/06/“寻找美佳学姐”一封情书，写给那年的你/">“寻找美佳学姐”一封情书，写给那年的你</a></li><li class="post-list-item"><a class="post-list-link" href="/2015/12/05/杜拉拉升职记----白领爱情不白领/">杜拉拉升职记----白领爱情不白领</a></li><li class="post-list-item"><a class="post-list-link" href="/2015/12/05/《火星救援》/">《火星救援》</a></li><li class="post-list-item"><a class="post-list-link" href="/2015/12/01/LU，一个狂吸四亿的APP/">LU，一个狂吸四亿的APP</a></li><li class="post-list-item"><a class="post-list-link" href="/2015/12/01/深夜随笔/">深夜随笔</a></li><li class="post-list-item"><a class="post-list-link" href="/2015/11/23/微信网页授权获取用户信息/">微信网页授权获取用户信息</a></li><li class="post-list-item"><a class="post-list-link" href="/2015/11/10/漫威/">漫威</a></li><li class="post-list-item"><a class="post-list-link" href="/2015/10/30/hello-world/">世界，你好！</a></li></ul>
    <script src="https://7.url.cn/edu/jslib/comb/require-2.1.6,jquery-1.9.1.min.js"></script>
    <script>
        $(".post-list").addClass("toc-article");
        $(".post-list-item a").attr("target","_blank");
        $("#post-nav-button > a:nth-child(2)").click(function() {
            $(".fa-bars, .fa-times").toggle();
            $(".post-list").toggle(300);
            if ($(".toc").length > 0) {
                $("#toc, #tocButton").toggle(200, function() {
                    if ($(".switch-area").is(":visible")) {
                        $("#tocButton").attr("value", valueHide);
                        }
                    })
            }
            else {
            }
        })
    </script>



    <script>
        
    </script>
</div>
      <footer id="footer">
    <div class="outer">
        <div id="footer-info">
            <div class="footer-left">
                &copy; 2018 edward
                <p>Hosted by <a href="https://pages.coding.me" style="font-weight: bold">Coding Pages</a></p>
            </div>
            <div class="footer-right">
                <a href="http://hexo.io/" target="_blank">Hexo</a>  Theme <a href="https://github.com/luuman/hexo-theme-spfk" target="_blank">spfk</a> by luuman
            </div>
        </div>
        
            <div class="visit">
                
                    <span id="busuanzi_container_site_pv" style='display:none'>
                        <span id="site-visit" >海贼到访数: 
                            <span id="busuanzi_value_site_uv"></span>
                        </span>
                    </span>
                
                
                    <span>, </span>
                
                
                    <span id="busuanzi_container_page_pv" style='display:none'>
                        <span id="page-visit">本页阅读量: 
                            <span id="busuanzi_value_page_pv"></span>
                        </span>
                    </span>
                
            </div>
        
    </div>
</footer>

    </div>
    <script src="https://7.url.cn/edu/jslib/comb/require-2.1.6,jquery-1.9.1.min.js"></script>
<script src="/js/main.js"></script>

    <script>
        $(document).ready(function() {
            var backgroundnum = 24;
            var backgroundimg = "url(/background/bg-x.jpg)".replace(/x/gi, Math.ceil(Math.random() * backgroundnum));
            $("#mobile-nav").css({"background-image": backgroundimg,"background-size": "cover","background-position": "center"});
            $(".left-col").css({"background-image": backgroundimg,"background-size": "cover","background-position": "center"});
        })
    </script>





<script type="text/x-mathjax-config">
MathJax.Hub.Config({
    tex2jax: {
        inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
        processEscapes: true,
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
    }
});

MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
        all[i].SourceElement().parentNode.className += ' has-jax';                 
    }       
});
</script>

<script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>


<div class="scroll" id="scroll">
    <a href="#"><i class="fa fa-arrow-up"></i></a>
    <a href="#comments"><i class="fa fa-comments-o"></i></a>
    <a href="#footer"><i class="fa fa-arrow-down"></i></a>
</div>
<script>
    $(document).ready(function() {
        if ($("#comments").length < 1) {
            $("#scroll > a:nth-child(2)").hide();
        };
    })
</script>

<script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js">
</script>

  <script language="javascript">
    $(function() {
        $("a[title]").each(function() {
            var a = $(this);
            var title = a.attr('title');
            if (title == undefined || title == "") return;
            a.data('title', title).removeAttr('title').hover(

            function() {
                var offset = a.offset();
                $("<div id=\"anchortitlecontainer\"></div>").appendTo($("body")).html(title).css({
                    top: offset.top - a.outerHeight() - 15,
                    left: offset.left + a.outerWidth()/2 + 1
                }).fadeIn(function() {
                    var pop = $(this);
                    setTimeout(function() {
                        pop.remove();
                    }, pop.text().length * 800);
                });
            }, function() {
                $("#anchortitlecontainer").remove();
            });
        });
    });
</script>

    <script type="text/javascript">
      window.onload = function(){
        document.getElementById("search").onclick = function(){
            console.log("search")
            search();
        }
      }
      function search(){
        (function(w,d,t,u,n,s,e){w['SwiftypeObject']=n;w[n]=w[n]||function(){
        (w[n].q=w[n].q||[]).push(arguments);};s=d.createElement(t);
        e=d.getElementsByTagName(t)[0];s.async=1;s.src=u;e.parentNode.insertBefore(s,e);
        })(window,document,'script','//s.swiftypecdn.com/install/v2/st.js','_st');

        _st('install','A1Pz-LKMXbrzcFg2FWi6','2.0.0');
      }
    </script>
  </div><!-- hexo-inject:begin --><!-- hexo-inject:end -->
</body>
</html>